api-version: reviewpad.com/v3.x

mode: verbose

rules:
  - name: empty-description
    spec: '$description() == ""'

workflows:
  - name: welcome-user ðŸ‘‹
    description: Welcome user first contribution
    if:
      - 'true'
    then:
      - '$commentOnce("Well done! This is your first contribution.")'

  - name: validate-commits ðŸ˜Œ
    always-run: true
    if:
      - 'true'
    then:
      - $commitLint()

  - name: label-pull-request-with-size
    always-run: true
    if:
      - rule: $size() <= 25
        extra-actions:
          - $addLabel("size-s")
      - rule: $size() > 25 && $size() <= 100
        extra-actions:
          - $addLabel("size-m")
      - rule: $size() > 100
        extra-actions:
          - $addLabel("size-l")

  - name: comment-on-empty-description ðŸ¥²
    description: Error on empty descriptions
    if:
      - rule: empty-description
    then:
      - '$error("The description of the pull request cannot be empty.")'

  - name: label-pull-requests-with-git-conflicts
    always-run: true
    if:
      - $hasGitConflicts()
    then:
      - '$addLabel("conflicts")'

  - name: comment-on-pull-request ðŸ¤—
    description: Instruction
    if:
      - 'true'
    then:
      - '$info("Thanks for this pull request. @raidenmiro will take a look!")'
      - '$warn("Please make sure the CI is green before merging.")'
